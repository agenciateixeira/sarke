(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7],{235:(e,r,t)=>{"use strict";t.d(r,{J:()=>l});var a=t(5155),s=t(2115),i=t(5016);let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("label",{ref:r,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...s})});l.displayName="Label"},604:(e,r,t)=>{Promise.resolve().then(t.bind(t,9042))},735:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>c,A:()=>u});var a=t(5155),s=t(2115),i=t(5497);let l="https://eaphfgwyiaqelppopcrt.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhcGhmZ3d5aWFxZWxwcG9wY3J0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjE3NTgsImV4cCI6MjA4NDkzNzc1OH0.J7iQGpIhkquMjSSVHmsNtSUGFqA310-irjvkT2vSgks";if(!l||!n)throw Error("Missing Supabase environment variables");let d=(0,i.UU)(l,n),o=(0,s.createContext)(void 0),c=e=>{let{children:r}=e,[t,i]=(0,s.useState)(null),[l,n]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{d.auth.getSession().then(e=>{var r;let{data:{session:t}}=e;n(null!=(r=null==t?void 0:t.user)?r:null),(null==t?void 0:t.user)?m(t.user.id):u(!1)});let{data:{subscription:e}}=d.auth.onAuthStateChange((e,r)=>{var t;n(null!=(t=null==r?void 0:r.user)?t:null),(null==r?void 0:r.user)?m(r.user.id):(i(null),u(!1))});return()=>e.unsubscribe()},[]);let m=async e=>{try{let{data:r,error:t}=await d.from("profiles").select("*").eq("id",e).single();if(t)throw t;i(r)}catch(e){console.error("Error loading user profile:",e)}finally{u(!1)}},f=async(e,r)=>{try{let{error:t}=await d.auth.signInWithPassword({email:e,password:r});if(t)throw t;return{}}catch(e){return{error:e.message}}},h=async(e,r,t,a)=>{try{let{data:s,error:i}=await d.auth.signUp({email:e,password:r});if(i)throw i;if(!s.user)throw Error("Failed to create user");let{error:l}=await d.from("profiles").insert({id:s.user.id,email:e,name:t,role:a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(l)throw l;return{}}catch(e){return{error:e.message}}},p=async()=>{await d.auth.signOut(),i(null),n(null)},x=async e=>{if(t)try{let{error:r}=await d.from("profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",t.id);if(r)throw r;i({...t,...e})}catch(e){console.error("Error updating profile:",e)}};return(0,a.jsx)(o.Provider,{value:{user:t,supabaseUser:l,loading:c,signIn:f,signUp:h,signOut:p,updateProfile:x},children:r})},u=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3209:(e,r,t)=>{"use strict";t.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>n,wL:()=>u});var a=t(5155),s=t(2115),i=t(5016);let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...s})});l.displayName="Card";let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",t),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"},4962:(e,r,t)=>{"use strict";t.d(r,{U:()=>d});var a=t(5155),s=t(7494),i=t(9427),l=t(7106),n=t(7003);let d=()=>{let{theme:e,toggleTheme:r}=(0,l.D)();return(0,a.jsx)(n.$,{variant:"outline",size:"icon",onClick:r,className:"rounded-full","aria-label":"Alternar tema",children:"light"===e?(0,a.jsx)(s.A,{className:"h-5 w-5"}):(0,a.jsx)(i.A,{className:"h-5 w-5"})})}},5016:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var a=t(2821),s=t(5889);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},6170:(e,r,t)=>{"use strict";t.d(r,{p:()=>l});var a=t(5155),s=t(2115),i=t(5016);let l=s.forwardRef((e,r)=>{let{className:t,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...l})});l.displayName="Input"},7003:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(5155),s=t(2115),i=t(3101),l=t(5016);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,...d}=e;return(0,a.jsx)("button",{className:(0,l.cn)(n({variant:s,size:i,className:t})),ref:r,...d})});d.displayName="Button"},7106:(e,r,t)=>{"use strict";t.d(r,{D:()=>n,ThemeProvider:()=>l});var a=t(5155),s=t(2115);let i=(0,s.createContext)(void 0),l=e=>{let{children:r}=e,[t,l]=(0,s.useState)("light"),[n,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{d(!0);let e=localStorage.getItem("sarke-theme");e?l(e):l(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,s.useEffect)(()=>{if(!n)return;let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(t),localStorage.setItem("sarke-theme",t)},[t,n]),n)?(0,a.jsx)(i.Provider,{value:{theme:t,toggleTheme:()=>{l(e=>"light"===e?"dark":"light")},setTheme:e=>{l(e)}},children:r}):(0,a.jsx)(a.Fragment,{children:r})},n=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},9042:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>I});var a=t(5155),s=t(2115),i=t(63),l=t(735),n=t(7003),d=t(6170),o=t(235),c=t(3209),u=t(815),m=t(4033),f=t(2108),h=t(5917),p=t(5016);let x=u.bL;u.YJ;let g=u.WT,v=s.forwardRef((e,r)=>{let{className:t,children:s,...i}=e;return(0,a.jsxs)(u.l9,{ref:r,className:(0,p.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[s,(0,a.jsx)(u.In,{asChild:!0,children:(0,a.jsx)(m.A,{className:"h-4 w-4 opacity-50"})})]})});v.displayName=u.l9.displayName;let j=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.PP,{ref:r,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})});j.displayName=u.PP.displayName;let b=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.wn,{ref:r,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})});b.displayName=u.wn.displayName;let w=s.forwardRef((e,r)=>{let{className:t,children:s,position:i="popper",...l}=e;return(0,a.jsx)(u.ZL,{children:(0,a.jsxs)(u.UC,{ref:r,className:(0,p.cn)("relative z-[10002] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,a.jsx)(j,{}),(0,a.jsx)(u.LM,{className:(0,p.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(b,{})]})})});w.displayName=u.UC.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.JU,{ref:r,className:(0,p.cn)("px-2 py-1.5 text-sm font-semibold",t),...s})}).displayName=u.JU.displayName;let y=s.forwardRef((e,r)=>{let{className:t,children:s,...i}=e;return(0,a.jsxs)(u.q7,{ref:r,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(u.VF,{children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})}),(0,a.jsx)(u.p4,{children:s})]})});y.displayName=u.q7.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(u.wv,{ref:r,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=u.wv.displayName;var N=t(6132),S=t(1362),C=t(5299);let k=()=>{let[e,r]=(0,s.useState)(""),[t,u]=(0,s.useState)(""),[m,f]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[j,b]=(0,s.useState)("colaborador"),[k,A]=(0,s.useState)(""),[I,R]=(0,s.useState)(!1),[E,J]=(0,s.useState)(!1),{signUp:F}=(0,l.A)(),P=(0,i.useRouter)(),q=async r=>{if(r.preventDefault(),A(""),R(!1),m!==h)return void A("As senhas n\xe3o coincidem");if(m.length<6)return void A("A senha deve ter no m\xednimo 6 caracteres");J(!0);try{let{error:r}=await F(t,m,e,j);r?A(r):(R(!0),setTimeout(()=>{P.push("/login")},2e3))}catch(e){A("Erro ao criar conta. Tente novamente.")}finally{J(!1)}};return(0,a.jsxs)(c.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(c.aR,{className:"space-y-1",children:[(0,a.jsx)(c.ZB,{className:"text-2xl font-bold text-center",children:"Primeiro Acesso"}),(0,a.jsx)(c.BT,{className:"text-center",children:"Crie sua conta para acessar o sistema Sarke"})]}),(0,a.jsxs)("form",{onSubmit:q,children:[(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[k&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 text-sm text-destructive bg-destructive/10 rounded-md",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("p",{children:k})]}),I&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 text-sm text-green-600 bg-green-50 dark:bg-green-950 rounded-md",children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),(0,a.jsx)("p",{children:"Conta criada com sucesso! Redirecionando..."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"name",children:"Nome Completo"}),(0,a.jsx)(d.p,{id:"name",type:"text",placeholder:"Seu nome",value:e,onChange:e=>r(e.target.value),required:!0,disabled:E||I})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(d.p,{id:"email",type:"email",placeholder:"seu@email.com",value:t,onChange:e=>u(e.target.value),required:!0,disabled:E||I})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"role",children:"N\xedvel de Acesso"}),(0,a.jsxs)(x,{value:j,onValueChange:e=>b(e),disabled:E||I,children:[(0,a.jsx)(v,{children:(0,a.jsx)(g,{placeholder:"Selecione o n\xedvel"})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(y,{value:"colaborador",children:"Colaborador"}),(0,a.jsx)(y,{value:"gerente",children:"Gerente de Equipe"}),(0,a.jsx)(y,{value:"juridico",children:"Jur\xeddico"}),(0,a.jsx)(y,{value:"admin",children:"Administrador"})]})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["admin"===j&&"Acesso total ao sistema","gerente"===j&&"Acesso a projetos e gest\xe3o de equipe","colaborador"===j&&"Acesso limitado por setor","juridico"===j&&"Acesso apenas \xe0 \xe1rea jur\xeddica"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"password",children:"Senha"}),(0,a.jsx)(d.p,{id:"password",type:"password",placeholder:"M\xednimo 6 caracteres",value:m,onChange:e=>f(e.target.value),required:!0,disabled:E||I})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"confirmPassword",children:"Confirmar Senha"}),(0,a.jsx)(d.p,{id:"confirmPassword",type:"password",placeholder:"Digite a senha novamente",value:h,onChange:e=>p(e.target.value),required:!0,disabled:E||I})]})]}),(0,a.jsxs)(c.wL,{className:"flex flex-col gap-4",children:[(0,a.jsx)(n.$,{type:"submit",className:"w-full",disabled:E||I,children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando conta..."]}):"Criar Conta"}),(0,a.jsxs)("div",{className:"text-sm text-center text-muted-foreground",children:["J\xe1 tem uma conta?"," ",(0,a.jsx)("button",{type:"button",onClick:()=>P.push("/login"),className:"text-primary hover:underline",disabled:E||I,children:"Fa\xe7a login"})]})]})]})]})};var A=t(4962);function I(){let{user:e,loading:r}=(0,l.A)(),t=(0,i.useRouter)();return((0,s.useEffect)(()=>{!r&&e&&t.push("/dashboard")},[e,r,t]),r)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(A.U,{})}),(0,a.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Sarke"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Sistema de Gest\xe3o Empresarial"})]}),(0,a.jsx)(k,{})]})]})}}},e=>{e.O(0,[779,497,93,441,255,358],()=>e(e.s=604)),_N_E=e.O()}]);