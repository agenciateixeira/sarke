(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{735:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>h,A:()=>d});var i=t(5155),s=t(2115),a=t(5497);let o="https://eaphfgwyiaqelppopcrt.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhcGhmZ3d5aWFxZWxwcG9wY3J0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjE3NTgsImV4cCI6MjA4NDkzNzc1OH0.J7iQGpIhkquMjSSVHmsNtSUGFqA310-irjvkT2vSgks";if(!o||!l)throw Error("Missing Supabase environment variables");let n=(0,a.UU)(o,l),u=(0,s.createContext)(void 0),h=e=>{let{children:r}=e,[t,a]=(0,s.useState)(null),[o,l]=(0,s.useState)(null),[h,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{n.auth.getSession().then(e=>{var r;let{data:{session:t}}=e;l(null!=(r=null==t?void 0:t.user)?r:null),(null==t?void 0:t.user)?c(t.user.id):d(!1)});let{data:{subscription:e}}=n.auth.onAuthStateChange((e,r)=>{var t;l(null!=(t=null==r?void 0:r.user)?t:null),(null==r?void 0:r.user)?c(r.user.id):(a(null),d(!1))});return()=>e.unsubscribe()},[]);let c=async e=>{try{let{data:r,error:t}=await n.from("profiles").select("*").eq("id",e).single();if(t)throw t;a(r)}catch(e){console.error("Error loading user profile:",e)}finally{d(!1)}},m=async(e,r)=>{try{let{error:t}=await n.auth.signInWithPassword({email:e,password:r});if(t)throw t;return{}}catch(e){return{error:e.message}}},w=async(e,r,t,i)=>{try{let{data:s,error:a}=await n.auth.signUp({email:e,password:r});if(a)throw a;if(!s.user)throw Error("Failed to create user");let{error:o}=await n.from("profiles").insert({id:s.user.id,email:e,name:t,role:i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(o)throw o;return{}}catch(e){return{error:e.message}}},f=async()=>{await n.auth.signOut(),a(null),l(null)},v=async e=>{if(t)try{let{error:r}=await n.from("profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",t.id);if(r)throw r;a({...t,...e})}catch(e){console.error("Error updating profile:",e)}};return(0,i.jsx)(u.Provider,{value:{user:t,supabaseUser:o,loading:h,signIn:m,signUp:w,signOut:f,updateProfile:v},children:r})},d=()=>{let e=(0,s.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1290:()=>{},3555:(e,r,t)=>{Promise.resolve().then(t.bind(t,735)),Promise.resolve().then(t.bind(t,7106)),Promise.resolve().then(t.t.bind(t,7074,23)),Promise.resolve().then(t.t.bind(t,1290,23)),Promise.resolve().then(t.bind(t,8720))},7106:(e,r,t)=>{"use strict";t.d(r,{D:()=>l,ThemeProvider:()=>o});var i=t(5155),s=t(2115);let a=(0,s.createContext)(void 0),o=e=>{let{children:r}=e,[t,o]=(0,s.useState)("light"),[l,n]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{n(!0);let e=localStorage.getItem("sarke-theme");e?o(e):o(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,s.useEffect)(()=>{if(!l)return;let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(t),localStorage.setItem("sarke-theme",t)},[t,l]),l)?(0,i.jsx)(a.Provider,{value:{theme:t,toggleTheme:()=>{o(e=>"light"===e?"dark":"light")},setTheme:e=>{o(e)}},children:r}):(0,i.jsx)(i.Fragment,{children:r})},l=()=>{let e=(0,s.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}}},e=>{e.O(0,[904,497,881,441,255,358],()=>e(e.s=3555)),_N_E=e.O()}]);