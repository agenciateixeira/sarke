(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{63:(e,r,t)=>{"use strict";var a=t(7260);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},735:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>d,A:()=>c});var a=t(5155),s=t(2115),u=t(5497);let i="https://eaphfgwyiaqelppopcrt.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhcGhmZ3d5aWFxZWxwcG9wY3J0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjE3NTgsImV4cCI6MjA4NDkzNzc1OH0.J7iQGpIhkquMjSSVHmsNtSUGFqA310-irjvkT2vSgks";if(!i||!n)throw Error("Missing Supabase environment variables");let o=(0,u.UU)(i,n),l=(0,s.createContext)(void 0),d=e=>{let{children:r}=e,[t,u]=(0,s.useState)(null),[i,n]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o.auth.getSession().then(e=>{var r;let{data:{session:t}}=e;n(null!=(r=null==t?void 0:t.user)?r:null),(null==t?void 0:t.user)?h(t.user.id):c(!1)});let{data:{subscription:e}}=o.auth.onAuthStateChange((e,r)=>{var t;n(null!=(t=null==r?void 0:r.user)?t:null),(null==r?void 0:r.user)?h(r.user.id):(u(null),c(!1))});return()=>e.unsubscribe()},[]);let h=async e=>{try{let{data:r,error:t}=await o.from("profiles").select("*").eq("id",e).single();if(t)throw t;u(r)}catch(e){console.error("Error loading user profile:",e)}finally{c(!1)}},f=async(e,r)=>{try{let{error:t}=await o.auth.signInWithPassword({email:e,password:r});if(t)throw t;return{}}catch(e){return{error:e.message}}},p=async(e,r,t,a)=>{try{let{data:s,error:u}=await o.auth.signUp({email:e,password:r});if(u)throw u;if(!s.user)throw Error("Failed to create user");let{error:i}=await o.from("profiles").insert({id:s.user.id,email:e,name:t,role:a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(i)throw i;return{}}catch(e){return{error:e.message}}},w=async()=>{await o.auth.signOut(),u(null),n(null)},m=async e=>{if(t)try{let{error:r}=await o.from("profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",t.id);if(r)throw r;u({...t,...e})}catch(e){console.error("Error updating profile:",e)}};return(0,a.jsx)(l.Provider,{value:{user:t,supabaseUser:i,loading:d,signIn:f,signUp:p,signOut:w,updateProfile:m},children:r})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6806:(e,r,t)=>{Promise.resolve().then(t.bind(t,7322))},7322:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(5155),s=t(2115),u=t(63),i=t(735);function n(){let{user:e,loading:r}=(0,i.A)(),t=(0,u.useRouter)();return(0,s.useEffect)(()=>{r||(e?t.push("/dashboard"):t.push("/login"))},[e,r,t]),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}}},e=>{e.O(0,[497,441,255,358],()=>e(e.s=6806)),_N_E=e.O()}]);