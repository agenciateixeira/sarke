exports.id=521,exports.ids=[521],exports.modules={4345:(a,b,c)=>{Promise.resolve().then(c.bind(c,69694))},13293:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>L});var d=c(21124),e=c(78008),f=c(3991),g=c.n(f),h=c(42378),i=c(92228),j=c(97201),k=c(15514),l=c(77850),m=c(53256),n=c(58368),o=c(32717),p=c(89027),q=c(72567),r=c(65893),s=c(44688),t=c(98688),u=c(46681),v=c(94104),w=c(3663),x=c(19710),y=c(19217),z=c(38301),A=c(21653);let B=z.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(A.bL,{ref:e,className:(0,k.cn)("relative overflow-hidden",a),...c,children:[(0,d.jsx)(A.LM,{className:"h-full w-full rounded-[inherit]",children:b}),(0,d.jsx)(C,{}),(0,d.jsx)(A.OK,{})]}));B.displayName=A.bL.displayName;let C=z.forwardRef(({className:a,orientation:b="vertical",...c},e)=>(0,d.jsx)(A.VM,{ref:e,orientation:b,className:(0,k.cn)("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,d.jsx)(A.lr,{className:"relative flex-1 rounded-full bg-border"})}));C.displayName=A.VM.displayName;var D=c(83542);let E=z.forwardRef(({className:a,orientation:b="horizontal",decorative:c=!0,...e},f)=>(0,d.jsx)(D.b,{ref:f,decorative:c,orientation:b,className:(0,k.cn)("shrink-0 bg-border","horizontal"===b?"h-[1px] w-full":"h-full w-[1px]",a),...e}));E.displayName=D.b.displayName;var F=c(35114);let G=z.forwardRef(({className:a,...b},c)=>(0,d.jsx)(F.bL,{ref:c,className:(0,k.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));G.displayName=F.bL.displayName,z.forwardRef(({className:a,...b},c)=>(0,d.jsx)(F._V,{ref:c,className:(0,k.cn)("aspect-square h-full w-full",a),...b})).displayName=F._V.displayName;let H=z.forwardRef(({className:a,...b},c)=>(0,d.jsx)(F.H4,{ref:c,className:(0,k.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));H.displayName=F.H4.displayName;var I=c(17210);let J=[{title:"Dashboard",href:"/dashboard",icon:(0,d.jsx)(l.A,{className:"h-5 w-5"}),setor:"dashboard"},{title:"Tarefas",href:"/dashboard/tarefas",icon:(0,d.jsx)(m.A,{className:"h-5 w-5"}),setor:"tarefas"},{title:"Comercial",href:"/dashboard/comercial",icon:(0,d.jsx)(n.A,{className:"h-5 w-5"}),setor:"comercial"},{title:"Financeiro",href:"/dashboard/financeiro",icon:(0,d.jsx)(o.A,{className:"h-5 w-5"}),setor:"financeiro"},{title:"Jur\xeddico",href:"/dashboard/juridico",icon:(0,d.jsx)(p.A,{className:"h-5 w-5"}),setor:"juridico"},{title:"Calend\xe1rio",href:"/dashboard/calendario",icon:(0,d.jsx)(q.A,{className:"h-5 w-5"}),setor:"calendario"},{title:"Gest\xe3o de Equipe",href:"/dashboard/equipe",icon:(0,d.jsx)(r.A,{className:"h-5 w-5"}),setor:"gestao_equipe"},{title:"Chat Interno",href:"/dashboard/chat",icon:(0,d.jsx)(s.A,{className:"h-5 w-5"}),setor:"chat_interno"},{title:"Ferramentas",href:"/dashboard/ferramentas",icon:(0,d.jsx)(t.A,{className:"h-5 w-5"}),setor:"ferramentas"},{title:"Gest\xe3o de Obra",href:"/dashboard/obra",icon:(0,d.jsx)(u.A,{className:"h-5 w-5"}),setor:"gestao_obra"},{title:"Cronograma",href:"/dashboard/cronograma",icon:(0,d.jsx)(v.A,{className:"h-5 w-5"}),setor:"cronograma"},{title:"Memorial",href:"/dashboard/memorial",icon:(0,d.jsx)(w.A,{className:"h-5 w-5"}),setor:"memorial"}],K=()=>{let{user:a,signOut:b}=(0,i.A)(),c=(0,h.usePathname)();if(!a)return null;let e=J.filter(b=>(0,j._m)(a.role,b.setor));return(0,d.jsxs)("div",{className:"flex h-screen w-64 flex-col border-r bg-card",children:[(0,d.jsxs)("div",{className:"flex h-16 items-center justify-between px-6 border-b",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold",children:"Sarke"}),(0,d.jsx)(I.U,{})]}),(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-3 rounded-lg bg-muted p-3",children:[(0,d.jsx)(G,{children:(0,d.jsx)(H,{children:a.name.split(" ").map(a=>a[0]).join("").toUpperCase().slice(0,2)})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"text-sm font-medium truncate",children:a.name}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground",children:["admin"===a.role&&"Administrador","gerente"===a.role&&"Gerente","colaborador"===a.role&&"Colaborador","juridico"===a.role&&"Jur\xeddico"]})]})]})}),(0,d.jsx)(E,{}),(0,d.jsx)(B,{className:"flex-1 px-3 py-2",children:(0,d.jsx)("div",{className:"space-y-1",children:e.map(a=>(0,d.jsxs)(g(),{href:a.href,className:(0,k.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors",c===a.href?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[a.icon,(0,d.jsx)("span",{children:a.title})]},a.href))})}),(0,d.jsx)(E,{}),(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)(y.$,{variant:"outline",className:"w-full justify-start gap-3",onClick:()=>b(),children:[(0,d.jsx)(x.A,{className:"h-5 w-5"}),(0,d.jsx)("span",{children:"Sair"})]})})]})};function L({children:a}){return(0,d.jsx)(e.O,{children:(0,d.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,d.jsx)(K,{}),(0,d.jsx)("main",{className:"flex-1 overflow-y-auto bg-background",children:a})]})})}},15514:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>j});var d=c(75338),e=c(31288),f=c.n(e);c(82704);var g=c(87429),h=c(73884),i=c(16076);let j={title:"Sarke - Sistema de Gest\xe3o",description:"Sistema integrado de gest\xe3o empresarial"};function k({children:a}){return(0,d.jsx)("html",{lang:"pt-BR",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsx)(h.ThemeProvider,{children:(0,d.jsxs)(g.AuthProvider,{children:[a,(0,d.jsx)(i.Toaster,{position:"top-right"})]})})})})}},17210:(a,b,c)=>{"use strict";c.d(b,{U:()=>i});var d=c(21124),e=c(60988),f=c(70175),g=c(67234),h=c(19217);let i=()=>{let{theme:a,toggleTheme:b}=(0,g.D)();return(0,d.jsx)(h.$,{variant:"outline",size:"icon",onClick:b,className:"rounded-full","aria-label":"Alternar tema",children:"light"===a?(0,d.jsx)(e.A,{className:"h-5 w-5"}):(0,d.jsx)(f.A,{className:"h-5 w-5"})})}},19217:(a,b,c)=>{"use strict";c.d(b,{$:()=>i});var d=c(21124),e=c(38301),f=c(26691),g=c(15514);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=e.forwardRef(({className:a,variant:b,size:c,...e},f)=>(0,d.jsx)("button",{className:(0,g.cn)(h({variant:b,size:c,className:a})),ref:f,...e}));i.displayName="Button"},42004:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},44212:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},45119:(a,b,c)=>{"use strict";c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h,wL:()=>l});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h3",{ref:c,className:(0,f.cn)("font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("p",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));l.displayName="CardFooter"},55797:(a,b,c)=>{Promise.resolve().then(c.bind(c,92228)),Promise.resolve().then(c.bind(c,67234)),Promise.resolve().then(c.bind(c,42830))},65525:(a,b,c)=>{Promise.resolve().then(c.bind(c,87429)),Promise.resolve().then(c.bind(c,73884)),Promise.resolve().then(c.bind(c,16076))},67234:(a,b,c)=>{"use strict";c.d(b,{D:()=>h,ThemeProvider:()=>g});var d=c(21124),e=c(38301);let f=(0,e.createContext)(void 0),g=({children:a})=>{let[b,c]=(0,e.useState)("light"),[g,h]=(0,e.useState)(!1);return((0,e.useEffect)(()=>{h(!0);let a=localStorage.getItem("sarke-theme");a?c(a):c(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,e.useEffect)(()=>{if(!g)return;let a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(b),localStorage.setItem("sarke-theme",b)},[b,g]),g)?(0,d.jsx)(f.Provider,{value:{theme:b,toggleTheme:()=>{c(a=>"light"===a?"dark":"light")},setTheme:a=>{c(a)}},children:a}):(0,d.jsx)(d.Fragment,{children:a})},h=()=>{let a=(0,e.useContext)(f);if(void 0===a)throw Error("useTheme must be used within a ThemeProvider");return a}},69694:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/guilhermeteixeira/Documents/PROJETOS/sarke/app/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/guilhermeteixeira/Documents/PROJETOS/sarke/app/dashboard/layout.tsx","default")},73884:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/guilhermeteixeira/Documents/PROJETOS/sarke/contexts/ThemeContext.tsx","ThemeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/guilhermeteixeira/Documents/PROJETOS/sarke/contexts/ThemeContext.tsx","useTheme")},74969:(a,b,c)=>{Promise.resolve().then(c.bind(c,13293))},78008:(a,b,c)=>{"use strict";c.d(b,{O:()=>i});var d=c(21124),e=c(38301),f=c(42378),g=c(92228),h=c(97201);let i=({children:a,requiredRole:b,requiredSetor:c})=>{let{user:i,loading:j}=(0,g.A)(),k=(0,f.useRouter)();return((0,e.useEffect)(()=>{if(!j){if(!i)return void k.push("/login");if(b&&!b.includes(i.role)||c&&!(0,h._m)(i.role,c))return void k.push("/dashboard");if("admin"!==i.role&&!(0,h.YL)(i))return void k.push("/fora-horario")}},[i,j,b,c,k]),j)?(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):i&&(!b||b.includes(i.role))&&(!c||(0,h._m)(i.role,c))?(0,d.jsx)(d.Fragment,{children:a}):null}},82704:()=>{},87429:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/guilhermeteixeira/Documents/PROJETOS/sarke/contexts/AuthContext.tsx","AuthProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/guilhermeteixeira/Documents/PROJETOS/sarke/contexts/AuthContext.tsx","useAuth")},92228:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>k,A:()=>l});var d=c(21124),e=c(38301),f=c(5699);let g="https://eaphfgwyiaqelppopcrt.supabase.co",h="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhcGhmZ3d5aWFxZWxwcG9wY3J0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNjE3NTgsImV4cCI6MjA4NDkzNzc1OH0.J7iQGpIhkquMjSSVHmsNtSUGFqA310-irjvkT2vSgks";if(!g||!h)throw Error("Missing Supabase environment variables");let i=(0,f.UU)(g,h),j=(0,e.createContext)(void 0),k=({children:a})=>{let[b,c]=(0,e.useState)(null),[f,g]=(0,e.useState)(null),[h,k]=(0,e.useState)(!0);(0,e.useEffect)(()=>{i.auth.getSession().then(({data:{session:a}})=>{g(a?.user??null),a?.user?l(a.user.id):k(!1)});let{data:{subscription:a}}=i.auth.onAuthStateChange((a,b)=>{g(b?.user??null),b?.user?l(b.user.id):(c(null),k(!1))});return()=>a.unsubscribe()},[]);let l=async a=>{try{let{data:b,error:d}=await i.from("profiles").select("*").eq("id",a).single();if(d)throw d;c(b)}catch(a){console.error("Error loading user profile:",a)}finally{k(!1)}},m=async(a,b)=>{try{let{error:c}=await i.auth.signInWithPassword({email:a,password:b});if(c)throw c;return{}}catch(a){return{error:a.message}}},n=async(a,b,c,d)=>{try{let{data:e,error:f}=await i.auth.signUp({email:a,password:b});if(f)throw f;if(!e.user)throw Error("Failed to create user");let{error:g}=await i.from("profiles").insert({id:e.user.id,email:a,name:c,role:d,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(g)throw g;return{}}catch(a){return{error:a.message}}},o=async()=>{await i.auth.signOut(),c(null),g(null)},p=async a=>{if(b)try{let{error:d}=await i.from("profiles").update({...a,updated_at:new Date().toISOString()}).eq("id",b.id);if(d)throw d;c({...b,...a})}catch(a){console.error("Error updating profile:",a)}};return(0,d.jsx)(j.Provider,{value:{user:b,supabaseUser:f,loading:h,signIn:m,signUp:n,signOut:o,updateProfile:p},children:a})},l=()=>{let a=(0,e.useContext)(j);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}},97201:(a,b,c)=>{"use strict";c.d(b,{YL:()=>f,_m:()=>e});let d={admin:["dashboard","tarefas","comercial","financeiro","juridico","calendario","gestao_equipe","chat_interno","ferramentas","gestao_obra","cronograma","memorial"],gerente:["dashboard","tarefas","calendario","chat_interno","ferramentas","gestao_obra","cronograma","memorial"],colaborador:["dashboard","tarefas","calendario","chat_interno"],juridico:["dashboard","juridico","calendario","chat_interno"]},e=(a,b)=>d[a]?.includes(b)??!1,f=a=>{if("admin"===a.role||!a.horario_inicio||!a.horario_fim)return!0;let b=new Date,c=b.getDay(),d=`${b.getHours().toString().padStart(2,"0")}:${b.getMinutes().toString().padStart(2,"0")}`;return(!a.dias_trabalho||!!a.dias_trabalho.includes(c))&&d>=a.horario_inicio&&d<=a.horario_fim}}};